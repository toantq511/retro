(this.webpackJsonpretro=this.webpackJsonpretro||[]).push([[0],{189:function(e,a,t){e.exports=t(356)},198:function(e,a,t){},249:function(e,a,t){},250:function(e,a,t){},336:function(e,a,t){},339:function(e,a,t){},342:function(e,a,t){},346:function(e,a,t){},349:function(e,a,t){},350:function(e,a,t){},351:function(e,a,t){},352:function(e,a,t){},353:function(e,a,t){},354:function(e,a,t){},356:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(10),o=t(37),l=t(33),i=t(357),u=t(365),m=t(367),s=(t(198),t(364)),d=t(87),p=t.n(d),b="https://protected-tor-34893.herokuapp.com/api",f="LOGIN",E="SET_LOADING_LOGIN",y="LOGOUT",O="SET_LOADING_SIGNUP",g="SET_LOADING_GET_USER",h="GET_USER",v=function(e){return{type:E,payload:e}},j=function(e){return{type:O,payload:e}},w=function(e){return function(a){localStorage.removeItem("token"),a({type:y}),e&&e()}},I=function(e){var a=e.children,t=Object(c.c)((function(e){return e.auth})).name,n=Object(c.b)(),s=Object(l.g)().push;return r.a.createElement(i.a,{className:"app-layout-wrapper"},r.a.createElement(i.a.Header,{className:"app-header"},r.a.createElement(o.b,{to:"/"},r.a.createElement("h1",{className:"app-brand"},"Fun Retro")),r.a.createElement(u.a,{theme:"dark",mode:"horizontal"},t?r.a.createElement(m.a,{trigger:"click",overlay:r.a.createElement(u.a,null,r.a.createElement(u.a.Item,null,r.a.createElement(o.b,{to:"/profile"},"Profile")),r.a.createElement(u.a.Item,{onClick:function(){return n(w(),s("/login"))}},"Log out"))},r.a.createElement("span",{style:{cursor:"pointer"}},t)):r.a.createElement(o.b,{to:"/login"},"Login"))),r.a.createElement(i.a.Content,{className:"app-content"},a))},N=t(45),L=t(50),T=t(369),k=(t(249),t(359)),A=t(362),D=t(363),_=(t(250),t(129)),S=t.n(_),G=t(165),P=p.a.create();P.interceptors.request.use(function(){var e=Object(G.a)(S.a.mark((function e(a){var t;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,localStorage.getItem("token");case 2:return t=e.sent,a.headers={Authorization:"Bearer ".concat(t)},a.baseURL=b,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),(function(e){return Promise.reject(e)})),P.interceptors.response.use((function(e){return new Promise((function(a){return a(e)}))}),(function(e){return e.response?403===e.response.status?new Promise((function(a,t){s.b.error("You don't have permission to access this page."),t(e)})):401===e.response.status?new Promise((function(a,t){s.b.error("Unauthorized"),t(e)})):new Promise((function(a,t){s.b.error("Something went wrong."),t(e)})):new Promise((function(a,t){s.b.error("Network Error."),t(e)}))}));var C=P,U="TOGGLE_REALTIME",x="SET_LOADING_BOARD",R="GET_BOARD",q="ADD_BOARD",B="SET_LOADING_ADD_BOARD",F=function(e){return{type:B,payload:e}},W=function(e){return{type:x,payload:e}},M=function(e){var a=e.form,t=Object(c.b)();return r.a.createElement(k.a,{className:"add-board-form-wrapper",form:a,layout:"vertical",onFinish:function(e){return t((a=e,function(e){e(F(!0)),C.post(b+"/board",a).then((function(a){var t=a.data,n=t.data,r=t.error;r?s.b.error(r.code+": "+r.message):e({type:q,payload:n})})).finally((function(){return e(F(!1))}))}));var a}},r.a.createElement(k.a.Item,{required:!0,label:"Name",name:"name",rules:[{required:!0}]},r.a.createElement(D.a,{size:"large",placeholder:"Name"})),r.a.createElement(k.a.Item,{name:"description",label:"Description"},r.a.createElement(D.a.TextArea,{size:"large",rows:5})))},z=function(e){var a=e.visible,t=e.hide,n=k.a.useForm(),o=Object(N.a)(n,1)[0],l=Object(c.c)((function(e){return e.dashboard})).isLoadingAdd;return r.a.createElement(A.a,{className:"add-board-modal-wrapper",onClose:t,visible:a,onCancel:t,title:"Add New Board",footer:r.a.createElement(r.a.Fragment,null,r.a.createElement(L.a,{onClick:t},"Cancel"),r.a.createElement(L.a,{type:"primary",onClick:function(){o.submit(),t()},loading:l},"Add"))},r.a.createElement(M,{form:o}))},H=function(){var e=Object(n.useState)(!1),a=Object(N.a)(e,2),t=a[0],c=a[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(L.a,{onClick:function(){return c(!0)},className:"add-new-board-wrapper",type:"ghost"},r.a.createElement(T.a,null),"Add board"),r.a.createElement(z,{visible:t,hide:function(){return c(!1)}}))},V=t(7),J=t(360),Y=t(113),$=t(110),K=t.n($),Q=t(370),X=t(371),Z=t(372),ee=t(368),ae=t(361),te=(t(336),function(e){var a=e.col1,t=e.col2,n=e.col3,c=e.total;return r.a.createElement("div",{className:"board-column-wrapper"},r.a.createElement("div",{className:"tag-wrapper"},r.a.createElement(ee.a,{color:"#87d068"},"Went Well"),r.a.createElement(Y.a,{title:a},r.a.createElement(ae.a,{percent:a/c*100,strokeColor:"#87d068",showInfo:!1}))),r.a.createElement("div",{className:"tag-wrapper"},r.a.createElement(ee.a,{color:"#108ee9"},"To Improve"),r.a.createElement(Y.a,{title:t},r.a.createElement(ae.a,{percent:t/c*100,strokeColor:"#108ee9",showInfo:!1}))),r.a.createElement("div",{className:"tag-wrapper"},r.a.createElement(ee.a,{color:"#f50"},"Action Items"),r.a.createElement(Y.a,{title:n},r.a.createElement(ae.a,{percent:n/c*100,strokeColor:"#f50",showInfo:!1}))))}),ne=(t(339),function(e){var a=e.item;return r.a.createElement("div",{className:"board-item-info-wrapper"},r.a.createElement("p",null,"Created By: ",a.createdBy),r.a.createElement("p",null,"Last Update: ",a.updatedBy," -"," ",K()(new Date(a.updatedAt)).fromNow()))}),re=function(e){var a=e.board;return r.a.createElement(J.a,{size:"small",className:"board-item-wrapper",actions:[r.a.createElement(Y.a,{key:"share",title:"Share URL"},r.a.createElement(Q.a,{onClick:function(){var e=document.location.href+"board/"+a.id;navigator.clipboard.writeText(e),s.b.success("URL copied")}})),r.a.createElement(Y.a,{key:"info",title:r.a.createElement(ne,{item:a}),placement:"bottom"},r.a.createElement(X.a,null))],title:r.a.createElement(o.b,{to:"/board/".concat(a.id)},a.name),extra:r.a.createElement(r.a.Fragment,null,r.a.createElement(Z.a,null)," ",K()(new Date(a.createdAt)).fromNow())},r.a.createElement(J.a.Meta,{description:a.description}),r.a.createElement(te,Object(V.a)({},a.items)))},ce=(t(342),t(83)),oe=t(54),le=t(358),ie=t(373),ue=function(e,a){return function(t){return e?r.a.createElement(ce.a,{align:"middle",justify:"center",style:{height:"100%"},className:"spinner-wrapper"},r.a.createElement(oe.a,null,r.a.createElement(le.a,{key:a,size:"large",indicator:r.a.createElement(ie.a,null)}))):t}},me=function(){var e=Object(c.b)(),a=Object(c.c)((function(e){return e.dashboard})),t=a.isLoadingGet,o=a.data;return Object(n.useEffect)((function(){return e((function(e){e(W(!0)),C.get(b+"/board").then((function(a){var t=a.data,n=t.data,r=t.error;r?s.b.error(r.code+": "+r.message):n&&e({type:R,payload:n})})).finally((function(){return e(W(!1))}))}))}),[e]),ue(t)(r.a.createElement("div",{className:"board-list-wrapper"},r.a.createElement(H,null),o.map((function(e){return r.a.createElement(re,{key:e.id,board:e})}))))},se=(t(346),function(){return r.a.createElement("div",{className:"dashboard-heading-wrapper"},r.a.createElement("div",{className:"title"},r.a.createElement("h1",null,"My boards")))}),de=function(){return Object(c.c)((function(e){return e.auth})).name?r.a.createElement("div",{className:"dashboard-wrapper"},r.a.createElement(se,null),r.a.createElement(me,null)):r.a.createElement(l.a,{to:"/login"})},pe=t(366),be=function(){return r.a.createElement(pe.a,{status:"404",title:"404",subTitle:"Sorry, the page you visited does not exist.",extra:r.a.createElement(o.b,{to:"/"},r.a.createElement(L.a,{type:"primary"},"Back Home"))})},fe=t(65),Ee=t(180),ye=t(181),Oe=t(111),ge={data:[],isLoadingGet:!1,isLoadingAdd:!1,realtime:!1},he=t(187),ve="SET_LOADING_UPDATE_PROFILE",je="UPDATE_PROFILE",we="SET_LOADING_UPDATE_PASSWORD",Ie=t(182),Ne=Object(V.a)({isLoadingLogin:!1,isLoadingGetUser:!0},function(){var e=localStorage.getItem("token");if(e)try{var a=Object(Ie.a)(e);a.password;return Object(he.a)(a,["password"])}catch(t){return}}()),Le=t(96),Te="SET_LOADING_GET_DETAIL",ke="GET_DETAIL",Ae="SET_LOADING_ADD_ITEM",De="ADD_ITEM",_e="EDIT_ITEM",Se="EDIT_BOARD",Ge={data:{items:{1:[],2:[],3:[]}},isLoading:!1},Pe=Object(fe.combineReducers)({dashboard:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case B:return Object(V.a)(Object(V.a)({},e),{},{isLoadingAdd:a.payload});case x:return Object(V.a)(Object(V.a)({},e),{},{isLoadingGet:a.payload});case U:return Object(V.a)(Object(V.a)({},e),{},{realtime:!e.realtime});case R:return Object(V.a)(Object(V.a)({},e),{},{data:a.payload});case q:return Object(V.a)(Object(V.a)({},e),{},{data:[a.payload].concat(Object(Oe.a)(e.data))});default:return e}},detail:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case Te:return Object(V.a)(Object(V.a)({},e),{},{isLoading:a.payload});case ke:return Object(V.a)(Object(V.a)({},e),{},{data:a.payload});case De:return Object(V.a)(Object(V.a)({},e),{},{data:Object(V.a)(Object(V.a)({},e.data),{},{items:Object(V.a)(Object(V.a)({},e.data.items),{},Object(Le.a)({},a.payload.column,[].concat(Object(Oe.a)(e.data.items[a.payload.column]),[a.payload])))})});case _e:return Object(V.a)(Object(V.a)({},e),{},{data:Object(V.a)(Object(V.a)({},e.data),{},{items:Object(V.a)(Object(V.a)({},e.data.items),{},Object(Le.a)({},a.payload.column,e.data.items[a.payload.column].map((function(e){return e.id===a.payload.id?a.payload:e}))))})});case Se:return Object(V.a)(Object(V.a)({},e),{},{data:Object(V.a)(Object(V.a)({},e.data),a.payload)});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ne,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case E:return Object(V.a)(Object(V.a)({},e),{},{isLoadingLogin:a.payload});case f:return Object(V.a)(Object(V.a)({},e),a.payload);case y:return{};case h:return Object(V.a)({isLoadingGetUser:!1},a.payload);case g:return Object(V.a)({isLoadingGetUser:a.payload},e);case je:return Object(V.a)(Object(V.a)({},e),a.payload);default:return e}}}),Ce=[ye.a],Ue=Object(fe.createStore)(Pe,{},Object(Ee.composeWithDevTools)(fe.applyMiddleware.apply(void 0,Ce))),xe=function(e){return{type:Te,payload:e}},Re=function(e){return{type:Ae,payload:e}},qe={WENT_WELL:1,TO_IMPROVE:2,ACTION_ITEMS:3,1:"Went Well",2:"To Imporve",3:"Action Items"},Be=(t(349),function(e){var a,t=e.item,o=Object(n.useState)(!1),l=Object(N.a)(o,2),i=l[0],u=l[1],m=Object(n.useState)(t.name),d=Object(N.a)(m,2),p=d[0],b=d[1],f=Object(c.b)();return i?r.a.createElement(D.a.TextArea,{value:p,onChange:function(e){return b(e.target.value)},onBlur:function(){return p!==t.name&&f(function(e,a,t){return function(n){C.put("/item/"+e,{name:a}).then((function(e){var a=e.data,r=a.data,c=a.error;c?s.b.error(c.code+": "+c.message):n({type:_e,payload:r}),t()}))}}(t.id,p,(function(){return u(!1)})))}}):r.a.createElement("div",{className:"item-wrapper",style:{backgroundColor:(a=t.column,1===a?"green":2===a?"red":"blue")},onDoubleClick:function(){return u(!0)}},t.name)}),Fe=(t(350),function(e){var a=e.type,t=e.items,o=e.boardId,l=Object(n.useState)(!1),i=Object(N.a)(l,2),u=i[0],m=i[1],d=Object(n.useState)(""),p=Object(N.a)(d,2),b=p[0],f=p[1],E=Object(c.b)(),y=function(){m(!1),f("")};return r.a.createElement("div",{className:"board-single-column-wrapper"},r.a.createElement("h2",{className:"title"},qe[a]),u?r.a.createElement(r.a.Fragment,null,r.a.createElement(D.a.TextArea,{value:b,onChange:function(e){return f(e.target.value)}}),r.a.createElement(L.a,{className:"btn-save",type:"primary",onClick:function(){return E(function(e,a,t,n){return function(r){r(Re(!0)),C.post("/item",{boardId:e,column:a,name:t}).then((function(e){var a=e.data,t=a.data,c=a.error;c?s.b.error(c.code+": "+c.message):r({type:De,payload:t}),n()})).finally((function(){return r(Re(!1))}))}}(o,a,b,y))}},"Save"),r.a.createElement(L.a,{className:"btn-cancel",type:"primary",danger:!0,onClick:y},"Cancel")):r.a.createElement(L.a,{className:"btn-add",onClick:function(){return m(!0)}},"Add Item"),t.map((function(e){return r.a.createElement(Be,{item:e,key:e.id})})))}),We=(t(351),function(e){var a=e.items,t=e.boardId;return r.a.createElement("div",{className:"board-columns-wrapper"},Object.values(qe).map((function(e){return!isNaN(e)&&r.a.createElement(Fe,{key:e,type:e,items:a[e],boardId:t})})))}),Me=function(e){var a=e.name,t=void 0===a?"":a,o=e.boardId,l=Object(c.b)(),i=Object(n.useState)(!1),u=Object(N.a)(i,2),m=u[0],d=u[1],p=Object(n.useState)(t),b=Object(N.a)(p,2),f=b[0],E=b[1];return r.a.createElement("div",{className:"board-name-wrapper"},m?r.a.createElement(D.a,{value:f,onChange:function(e){return E(e.target.value)},onBlur:function(){l(function(e,a){return function(t){C.put("/board/"+e,{name:a}).then((function(e){var a=e.data,n=a.data,r=a.error;r?s.b.error(r.code+": "+r.message):t({type:Se,payload:n})}))}}(o,f)),d(!1)}}):r.a.createElement("h2",{onDoubleClick:function(){return d(!0)}},t))},ze=function(){var e=Object(l.h)().id,a=Object(c.b)();Object(n.useEffect)((function(){return a(function(e){return function(a){a(xe(!0)),C.get("/board/"+e).then((function(e){var t=e.data,n=t.data,r=t.error;r?s.b.error(r.code+": "+r.message):a({type:ke,payload:n})})).finally((function(){return a(xe(!1))}))}}(e))}),[a,e]);var t=Object(c.c)((function(e){return e.detail})),o=t.isLoading,i=t.data;return Object(c.c)((function(e){return e.auth})).name?ue(o)(r.a.createElement("div",{className:"board-detail-wrapper"},r.a.createElement(Me,{name:i.name,boardId:i.id}),r.a.createElement(We,{items:null===i||void 0===i?void 0:i.items,boardId:i.id}))):r.a.createElement(l.a,{to:"/login"})},He=t(374),Ve=t(375),Je=(t(352),function(){var e=Object(c.b)(),a=Object(c.c)((function(e){return e.auth})),t=a.isLoadingLogin;return a.username?r.a.createElement(l.a,{to:"/"}):r.a.createElement("div",{className:"login-wrapper"},r.a.createElement("h1",null,"Login"),r.a.createElement(k.a,{layout:"vertical",onFinish:function(a){return e(function(e){return function(a){a(v(!0)),p.a.post(b+"/login",e).then((function(e){var t=e.data,n=t.data,r=t.error;r?s.b.error(r.code+": "+r.message):(a({type:f,payload:n}),localStorage.setItem("token",n.token))})).finally((function(){return a(v(!1))}))}}(a))}},r.a.createElement(k.a.Item,{name:"username",required:!0},r.a.createElement(D.a,{placeholder:"Username",prefix:r.a.createElement(He.a,null)})),r.a.createElement(k.a.Item,{name:"password",required:!0},r.a.createElement(D.a.Password,{placeholder:"Password",prefix:r.a.createElement(Ve.a,null)})),r.a.createElement(L.a,{block:!0,type:"primary",htmlType:"submit",loading:t},"Login")),"New User ? ",r.a.createElement(o.b,{to:"/registry"},"Registry"))}),Ye=t(376),$e=(t(353),function(){var e=Object(c.b)(),a=Object(l.g)(),t=Object(c.c)((function(e){return e.auth})).isLoadingSignup;return r.a.createElement("div",{className:"registry-wrapper"},r.a.createElement("h1",null,"Registry"),r.a.createElement(k.a,{layout:"vertical",onFinish:function(t){return e(function(e,a){return function(t){t(j(!0)),p.a.post(b+"/signup",e).then((function(e){var t=e.data,n=t.data,r=t.error;r?s.b.error(r.code+": "+r.message):n&&a()})).finally((function(){return t(j(!1))}))}}(t,(function(){return a.push("/login")})))}},r.a.createElement(k.a.Item,{name:"name",required:!0,rules:[{required:!0}]},r.a.createElement(D.a,{placeholder:"Name",prefix:r.a.createElement(Ye.a,null)})),r.a.createElement(k.a.Item,{name:"username",required:!0,rules:[{required:!0}]},r.a.createElement(D.a,{placeholder:"Username",prefix:r.a.createElement(He.a,null)})),r.a.createElement(k.a.Item,{name:"password",required:!0,rules:[{required:!0}]},r.a.createElement(D.a.Password,{placeholder:"Password",prefix:r.a.createElement(Ve.a,null)})),r.a.createElement(L.a,{block:!0,type:"primary",htmlType:"submit",loading:t},"Registry")),"Have account ? ",r.a.createElement(o.b,{to:"/login"},"Login"))}),Ke=function(e){return{type:ve,payload:e}},Qe=function(e){return{type:we,payload:e}},Xe=function(){var e=Object(c.b)(),a=Object(c.c)((function(e){return e.auth}));return r.a.createElement(k.a,{className:"update-password-wrapper",initialValues:a,layout:"vertical",onFinish:function(a){return e(function(e){return function(a){a(Qe(!0)),C.put("/user/password",e).then((function(e){var t=e.data.error;t?s.b.error(t.code+": "+t.message):(s.b.success("Update password successfully"),setTimeout((function(){a(w())}),1e3))})).finally((function(){return a(Qe(!1))}))}}(a))}},r.a.createElement(k.a.Item,{label:"Old Password",name:"oldPass",required:!0,rules:[{required:!0}]},r.a.createElement(D.a.Password,{prefix:r.a.createElement(Ve.a,null)})),r.a.createElement(k.a.Item,{label:"New Password",name:"newPass",required:!0,rules:[{required:!0}]},r.a.createElement(D.a.Password,{prefix:r.a.createElement(Ve.a,null)})),r.a.createElement(L.a,{block:!0,type:"primary",htmlType:"submit"},"Update"))},Ze=function(){var e=Object(c.b)(),a=Object(c.c)((function(e){return e.auth}));return r.a.createElement(k.a,{className:"update-profile-wrapper",initialValues:a,layout:"vertical",onFinish:function(a){return e(function(e){return function(a){a(Ke(!0)),C.put("/user/",e).then((function(e){var t=e.data,n=t.data,r=t.error;r?s.b.error(r.code+": "+r.message):(n.token&&localStorage.setItem("token",n.token),a({type:je,payload:n}),s.b.success("Update profile successfully"))})).finally((function(){return a(Ke(!1))}))}}(a))}},r.a.createElement(k.a.Item,{label:"Username",name:"username",required:!0,rules:[{required:!0}]},r.a.createElement(D.a,{placeholder:"Username",disabled:!0,prefix:r.a.createElement(He.a,null)})),r.a.createElement(k.a.Item,{label:"Name",name:"name",required:!0,rules:[{required:!0}]},r.a.createElement(D.a,{placeholder:"Name",prefix:r.a.createElement(Ye.a,null)})),r.a.createElement(L.a,{block:!0,type:"primary",htmlType:"submit"},"Update"))},ea=(t(354),function(){return Object(c.c)((function(e){return e.auth})).name?r.a.createElement("div",{className:"profile-wrapper"},r.a.createElement(Ze,null),r.a.createElement(Xe,null)):r.a.createElement(l.a,{to:"/login"})}),aa=function(){return r.a.createElement(c.a,{store:Ue},r.a.createElement(o.a,{basename:"/retro"},r.a.createElement(I,null,r.a.createElement(l.d,null,r.a.createElement(l.b,{exact:!0,path:"/",component:de}),r.a.createElement(l.b,{path:"/board/:id",component:ze}),r.a.createElement(l.b,{path:"/profile",component:ea}),r.a.createElement(l.b,{path:"/login",component:Je}),r.a.createElement(l.b,{path:"/registry",component:$e}),r.a.createElement(l.b,{component:be})))))},ta=t(17),na=t.n(ta);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(355);na.a.render(r.a.createElement(aa,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[189,1,2]]]);
//# sourceMappingURL=main.a3ee7d7b.chunk.js.map