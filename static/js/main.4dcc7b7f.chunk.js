(this.webpackJsonpretro=this.webpackJsonpretro||[]).push([[0],{189:function(e,a,t){e.exports=t(356)},198:function(e,a,t){},249:function(e,a,t){},250:function(e,a,t){},336:function(e,a,t){},339:function(e,a,t){},342:function(e,a,t){},346:function(e,a,t){},349:function(e,a,t){},350:function(e,a,t){},351:function(e,a,t){},352:function(e,a,t){},353:function(e,a,t){},354:function(e,a,t){},356:function(e,a,t){"use strict";t.r(a);var r=t(0),n=t.n(r),c=t(10),o=t(37),l=t(33),i=t(357),u=t(365),m=t(367),s=(t(198),t(364)),d=t(87),p=t.n(d);console.log(Object({NODE_ENV:"production",PUBLIC_URL:"/retro",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_API:"https://protected-tor-34893.herokuapp.com/api"}));var b="https://protected-tor-34893.herokuapp.com/api",f="LOGIN",E="SET_LOADING_LOGIN",O="LOGOUT",y="SET_LOADING_SIGNUP",g="SET_LOADING_GET_USER",h="GET_USER",v=function(e){return{type:E,payload:e}},j=function(e){return{type:y,payload:e}},w=function(e){return function(a){localStorage.removeItem("token"),a({type:O}),e&&e()}},N=function(e){var a=e.children,t=Object(c.c)((function(e){return e.auth})).name,r=Object(c.b)(),s=Object(l.g)().push;return n.a.createElement(i.a,{className:"app-layout-wrapper"},n.a.createElement(i.a.Header,{className:"app-header"},n.a.createElement(o.b,{to:"/"},n.a.createElement("h1",{className:"app-brand"},"Fun Retro")),n.a.createElement(u.a,{theme:"dark",mode:"horizontal"},t?n.a.createElement(m.a,{trigger:"click",overlay:n.a.createElement(u.a,null,n.a.createElement(u.a.Item,null,n.a.createElement(o.b,{to:"/profile"},"Profile")),n.a.createElement(u.a.Item,{onClick:function(){return r(w(),s("/login"))}},"Log out"))},n.a.createElement("span",{style:{cursor:"pointer"}},t)):n.a.createElement(o.b,{to:"/login"},"Login"))),n.a.createElement(i.a.Content,{className:"app-content"},a))},I=t(45),T=t(50),L=t(369),_=(t(249),t(359)),A=t(362),k=t(363),D=(t(250),t(129)),S=t.n(D),P=t(165),C=p.a.create();C.interceptors.request.use(function(){var e=Object(P.a)(S.a.mark((function e(a){var t;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,localStorage.getItem("token");case 2:return t=e.sent,a.headers={Authorization:"Bearer ".concat(t)},a.baseURL=b,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),(function(e){return Promise.reject(e)})),C.interceptors.response.use((function(e){return new Promise((function(a){return a(e)}))}),(function(e){return e.response?403===e.response.status?new Promise((function(a,t){s.b.error("You don't have permission to access this page."),t(e)})):401===e.response.status?new Promise((function(a,t){s.b.error("Not logged in"),t(e)})):new Promise((function(a,t){s.b.error("Something went wrong."),t(e)})):new Promise((function(a,t){s.b.error("Network Error."),t(e)}))}));var G=C,U="TOGGLE_REALTIME",R="SET_LOADING_BOARD",x="GET_BOARD",q="ADD_BOARD",B="SET_LOADING_ADD_BOARD",F=function(e){return{type:B,payload:e}},W=function(e){return{type:R,payload:e}},M=function(e){var a=e.form,t=Object(c.b)();return n.a.createElement(_.a,{className:"add-board-form-wrapper",form:a,layout:"vertical",onFinish:function(e){return t((a=e,function(e){e(F(!0)),G.post(b+"/board",a).then((function(a){var t=a.data,r=t.data,n=t.error;n?s.b.error(n.code+": "+n.message):e({type:q,payload:r})})).finally((function(){return e(F(!1))}))}));var a}},n.a.createElement(_.a.Item,{required:!0,label:"Name",name:"name",rules:[{required:!0}]},n.a.createElement(k.a,{size:"large",placeholder:"Name"})),n.a.createElement(_.a.Item,{name:"description",label:"Description"},n.a.createElement(k.a.TextArea,{size:"large",rows:5})))},z=function(e){var a=e.visible,t=e.hide,r=_.a.useForm(),o=Object(I.a)(r,1)[0],l=Object(c.c)((function(e){return e.dashboard})).isLoadingAdd;return n.a.createElement(A.a,{className:"add-board-modal-wrapper",onClose:t,visible:a,onCancel:t,title:"Add New Board",footer:n.a.createElement(n.a.Fragment,null,n.a.createElement(T.a,{onClick:t},"Cancel"),n.a.createElement(T.a,{type:"primary",onClick:function(){o.submit(),t()},loading:l},"Add"))},n.a.createElement(M,{form:o}))},H=function(){var e=Object(r.useState)(!1),a=Object(I.a)(e,2),t=a[0],c=a[1];return n.a.createElement(n.a.Fragment,null,n.a.createElement(T.a,{onClick:function(){return c(!0)},className:"add-new-board-wrapper",type:"ghost"},n.a.createElement(L.a,null),"Add board"),n.a.createElement(z,{visible:t,hide:function(){return c(!1)}}))},V=t(7),K=t(360),J=t(113),Y=t(110),$=t.n(Y),Q=t(370),X=t(371),Z=t(372),ee=t(368),ae=t(361),te=(t(336),function(e){var a=e.col1,t=e.col2,r=e.col3,c=e.total;return n.a.createElement("div",{className:"board-column-wrapper"},n.a.createElement("div",{className:"tag-wrapper"},n.a.createElement(ee.a,{color:"#87d068"},"Went Well"),n.a.createElement(J.a,{title:a},n.a.createElement(ae.a,{percent:a/c*100,strokeColor:"#87d068",showInfo:!1}))),n.a.createElement("div",{className:"tag-wrapper"},n.a.createElement(ee.a,{color:"#108ee9"},"To Improve"),n.a.createElement(J.a,{title:t},n.a.createElement(ae.a,{percent:t/c*100,strokeColor:"#108ee9",showInfo:!1}))),n.a.createElement("div",{className:"tag-wrapper"},n.a.createElement(ee.a,{color:"#f50"},"Action Items"),n.a.createElement(J.a,{title:r},n.a.createElement(ae.a,{percent:r/c*100,strokeColor:"#f50",showInfo:!1}))))}),re=(t(339),function(e){var a=e.item;return n.a.createElement("div",{className:"board-item-info-wrapper"},n.a.createElement("p",null,"Created By: ",a.createdBy),n.a.createElement("p",null,"Last Update: ",a.updatedBy," -"," ",$()(new Date(a.updatedAt)).fromNow()))}),ne=function(e){var a=e.board;return n.a.createElement(K.a,{size:"small",className:"board-item-wrapper",actions:[n.a.createElement(J.a,{key:"share",title:"Share URL"},n.a.createElement(Q.a,{onClick:function(){var e=document.location.href+"board/"+a.id;navigator.clipboard.writeText(e),s.b.success("URL copied")}})),n.a.createElement(J.a,{key:"info",title:n.a.createElement(re,{item:a}),placement:"bottom"},n.a.createElement(X.a,null))],title:n.a.createElement(o.b,{to:"/board/".concat(a.id)},a.name),extra:n.a.createElement(n.a.Fragment,null,n.a.createElement(Z.a,null)," ",$()(new Date(a.createdAt)).fromNow())},n.a.createElement(K.a.Meta,{description:a.description}),n.a.createElement(te,Object(V.a)({},a.items)))},ce=(t(342),t(83)),oe=t(54),le=t(358),ie=t(373),ue=function(e,a){return function(t){return e?n.a.createElement(ce.a,{align:"middle",justify:"center",style:{height:"100%"},className:"spinner-wrapper"},n.a.createElement(oe.a,null,n.a.createElement(le.a,{key:a,size:"large",indicator:n.a.createElement(ie.a,null)}))):t}},me=function(){var e=Object(c.b)(),a=Object(c.c)((function(e){return e.dashboard})),t=a.isLoadingGet,o=a.data;return Object(r.useEffect)((function(){return e((function(e){e(W(!0)),G.get(b+"/board").then((function(a){var t=a.data,r=t.data,n=t.error;n?s.b.error(n.code+": "+n.message):r&&e({type:x,payload:r})})).finally((function(){return e(W(!1))}))}))}),[e]),ue(t)(n.a.createElement("div",{className:"board-list-wrapper"},n.a.createElement(H,null),o.map((function(e){return n.a.createElement(ne,{key:e.id,board:e})}))))},se=(t(346),function(){return n.a.createElement("div",{className:"dashboard-heading-wrapper"},n.a.createElement("div",{className:"title"},n.a.createElement("h1",null,"My boards")))}),de=function(){return Object(c.c)((function(e){return e.auth})).name?n.a.createElement("div",{className:"dashboard-wrapper"},n.a.createElement(se,null),n.a.createElement(me,null)):n.a.createElement(l.a,{to:"/login"})},pe=t(366),be=function(){return n.a.createElement(pe.a,{status:"404",title:"404",subTitle:"Sorry, the page you visited does not exist.",extra:n.a.createElement(o.b,{to:"/"},n.a.createElement(T.a,{type:"primary"},"Back Home"))})},fe=t(65),Ee=t(180),Oe=t(181),ye=t(111),ge={data:[],isLoadingGet:!1,isLoadingAdd:!1,realtime:!1},he=t(187),ve="SET_LOADING_UPDATE_PROFILE",je="UPDATE_PROFILE",we="SET_LOADING_UPDATE_PASSWORD",Ne=t(182),Ie=Object(V.a)({isLoadingLogin:!1,isLoadingGetUser:!0},function(){var e=localStorage.getItem("token");if(e)try{var a=Object(Ne.a)(e);a.password;return Object(he.a)(a,["password"])}catch(t){return}}()),Te=t(96),Le="SET_LOADING_GET_DETAIL",_e="GET_DETAIL",Ae="SET_LOADING_ADD_ITEM",ke="ADD_ITEM",De="EDIT_ITEM",Se="EDIT_BOARD",Pe={data:{items:{1:[],2:[],3:[]}},isLoading:!1},Ce=Object(fe.combineReducers)({dashboard:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case B:return Object(V.a)(Object(V.a)({},e),{},{isLoadingAdd:a.payload});case R:return Object(V.a)(Object(V.a)({},e),{},{isLoadingGet:a.payload});case U:return Object(V.a)(Object(V.a)({},e),{},{realtime:!e.realtime});case x:return Object(V.a)(Object(V.a)({},e),{},{data:a.payload});case q:return Object(V.a)(Object(V.a)({},e),{},{data:[a.payload].concat(Object(ye.a)(e.data))});default:return e}},detail:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pe,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case Le:return Object(V.a)(Object(V.a)({},e),{},{isLoading:a.payload});case _e:return Object(V.a)(Object(V.a)({},e),{},{data:a.payload});case ke:return Object(V.a)(Object(V.a)({},e),{},{data:Object(V.a)(Object(V.a)({},e.data),{},{items:Object(V.a)(Object(V.a)({},e.data.items),{},Object(Te.a)({},a.payload.column,[].concat(Object(ye.a)(e.data.items[a.payload.column]),[a.payload])))})});case De:return Object(V.a)(Object(V.a)({},e),{},{data:Object(V.a)(Object(V.a)({},e.data),{},{items:Object(V.a)(Object(V.a)({},e.data.items),{},Object(Te.a)({},a.payload.column,e.data.items[a.payload.column].map((function(e){return e.id===a.payload.id?a.payload:e}))))})});case Se:return Object(V.a)(Object(V.a)({},e),{},{data:Object(V.a)(Object(V.a)({},e.data),a.payload)});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case E:return Object(V.a)(Object(V.a)({},e),{},{isLoadingLogin:a.payload});case f:return Object(V.a)(Object(V.a)({},e),a.payload);case O:return{};case h:return Object(V.a)({isLoadingGetUser:!1},a.payload);case g:return Object(V.a)({isLoadingGetUser:a.payload},e);case je:return Object(V.a)(Object(V.a)({},e),a.payload);default:return e}}}),Ge=[Oe.a],Ue=Object(fe.createStore)(Ce,{},Object(Ee.composeWithDevTools)(fe.applyMiddleware.apply(void 0,Ge))),Re=function(e){return{type:Le,payload:e}},xe=function(e){return{type:Ae,payload:e}},qe={WENT_WELL:1,TO_IMPROVE:2,ACTION_ITEMS:3,1:"Went Well",2:"To Imporve",3:"Action Items"},Be=(t(349),function(e){var a,t=e.item,o=Object(r.useState)(!1),l=Object(I.a)(o,2),i=l[0],u=l[1],m=Object(r.useState)(t.name),d=Object(I.a)(m,2),p=d[0],b=d[1],f=Object(c.b)();return i?n.a.createElement(k.a.TextArea,{value:p,onChange:function(e){return b(e.target.value)},onBlur:function(){return p!==t.name&&f(function(e,a,t){return function(r){G.put("/item/"+e,{name:a}).then((function(e){var a=e.data,n=a.data,c=a.error;c?s.b.error(c.code+": "+c.message):r({type:De,payload:n}),t()}))}}(t.id,p,(function(){return u(!1)})))}}):n.a.createElement("div",{className:"item-wrapper",style:{backgroundColor:(a=t.column,1===a?"green":2===a?"red":"blue")},onDoubleClick:function(){return u(!0)}},t.name)}),Fe=(t(350),function(e){var a=e.type,t=e.items,o=e.boardId,l=Object(r.useState)(!1),i=Object(I.a)(l,2),u=i[0],m=i[1],d=Object(r.useState)(""),p=Object(I.a)(d,2),b=p[0],f=p[1],E=Object(c.b)(),O=function(){m(!1),f("")};return n.a.createElement("div",{className:"board-single-column-wrapper"},n.a.createElement("h2",{className:"title"},qe[a]),u?n.a.createElement(n.a.Fragment,null,n.a.createElement(k.a.TextArea,{value:b,onChange:function(e){return f(e.target.value)}}),n.a.createElement(T.a,{className:"btn-save",type:"primary",onClick:function(){return E(function(e,a,t,r){return function(n){n(xe(!0)),G.post("/item",{boardId:e,column:a,name:t}).then((function(e){var a=e.data,t=a.data,c=a.error;c?s.b.error(c.code+": "+c.message):n({type:ke,payload:t}),r()})).finally((function(){return n(xe(!1))}))}}(o,a,b,O))}},"Save"),n.a.createElement(T.a,{className:"btn-cancel",type:"primary",danger:!0,onClick:O},"Cancel")):n.a.createElement(T.a,{className:"btn-add",onClick:function(){return m(!0)}},"Add Item"),t.map((function(e){return n.a.createElement(Be,{item:e,key:e.id})})))}),We=(t(351),function(e){var a=e.items,t=e.boardId;return n.a.createElement("div",{className:"board-columns-wrapper"},Object.values(qe).map((function(e){return!isNaN(e)&&n.a.createElement(Fe,{key:e,type:e,items:a[e],boardId:t})})))}),Me=function(e){var a=e.name,t=void 0===a?"":a,o=e.boardId,l=Object(c.b)(),i=Object(r.useState)(!1),u=Object(I.a)(i,2),m=u[0],d=u[1],p=Object(r.useState)(t),b=Object(I.a)(p,2),f=b[0],E=b[1];return n.a.createElement("div",{className:"board-name-wrapper"},m?n.a.createElement(k.a,{value:f,onChange:function(e){return E(e.target.value)},onBlur:function(){l(function(e,a){return function(t){G.put("/board/"+e,{name:a}).then((function(e){var a=e.data,r=a.data,n=a.error;n?s.b.error(n.code+": "+n.message):t({type:Se,payload:r})}))}}(o,f)),d(!1)}}):n.a.createElement("h2",{onDoubleClick:function(){return d(!0)}},t))},ze=function(){var e=Object(l.h)().id,a=Object(c.b)();Object(r.useEffect)((function(){return a(function(e){return function(a){a(Re(!0)),G.get("/board/"+e).then((function(e){var t=e.data,r=t.data,n=t.error;n?s.b.error(n.code+": "+n.message):a({type:_e,payload:r})})).finally((function(){return a(Re(!1))}))}}(e))}),[a,e]);var t=Object(c.c)((function(e){return e.detail})),o=t.isLoading,i=t.data;return Object(c.c)((function(e){return e.auth})).name?ue(o)(n.a.createElement("div",{className:"board-detail-wrapper"},n.a.createElement(Me,{name:i.name,boardId:i.id}),n.a.createElement(We,{items:null===i||void 0===i?void 0:i.items,boardId:i.id}))):n.a.createElement(l.a,{to:"/login"})},He=t(374),Ve=t(375),Ke=(t(352),function(){var e=Object(c.b)(),a=Object(c.c)((function(e){return e.auth})),t=a.isLoadingLogin;return a.username?n.a.createElement(l.a,{to:"/"}):n.a.createElement("div",{className:"login-wrapper"},n.a.createElement("h1",null,"Login"),n.a.createElement(_.a,{layout:"vertical",onFinish:function(a){return e(function(e){return function(a){a(v(!0)),p.a.post(b+"/login",e).then((function(e){var t=e.data,r=t.data,n=t.error;n?s.b.error(n.code+": "+n.message):(a({type:f,payload:r}),localStorage.setItem("token",r.token))})).finally((function(){return a(v(!1))}))}}(a))}},n.a.createElement(_.a.Item,{name:"username",required:!0},n.a.createElement(k.a,{placeholder:"Username",prefix:n.a.createElement(He.a,null)})),n.a.createElement(_.a.Item,{name:"password",required:!0},n.a.createElement(k.a.Password,{placeholder:"Password",prefix:n.a.createElement(Ve.a,null)})),n.a.createElement(T.a,{block:!0,type:"primary",htmlType:"submit",loading:t},"Login")),"New User ? ",n.a.createElement(o.b,{to:"/registry"},"Registry"))}),Je=t(376),Ye=(t(353),function(){var e=Object(c.b)(),a=Object(l.g)(),t=Object(c.c)((function(e){return e.auth})).isLoadingSignup;return n.a.createElement("div",{className:"registry-wrapper"},n.a.createElement("h1",null,"Registry"),n.a.createElement(_.a,{layout:"vertical",onFinish:function(t){return e(function(e,a){return function(t){t(j(!0)),p.a.post(b+"/signup",e).then((function(e){var t=e.data,r=t.data,n=t.error;n?s.b.error(n.code+": "+n.message):r&&a()})).finally((function(){return t(j(!1))}))}}(t,(function(){return a.push("/login")})))}},n.a.createElement(_.a.Item,{name:"name",required:!0,rules:[{required:!0}]},n.a.createElement(k.a,{placeholder:"Name",prefix:n.a.createElement(Je.a,null)})),n.a.createElement(_.a.Item,{name:"username",required:!0,rules:[{required:!0}]},n.a.createElement(k.a,{placeholder:"Username",prefix:n.a.createElement(He.a,null)})),n.a.createElement(_.a.Item,{name:"password",required:!0,rules:[{required:!0}]},n.a.createElement(k.a.Password,{placeholder:"Password",prefix:n.a.createElement(Ve.a,null)})),n.a.createElement(T.a,{block:!0,type:"primary",htmlType:"submit",loading:t},"Registry")),"Have account ? ",n.a.createElement(o.b,{to:"/login"},"Login"))}),$e=function(e){return{type:ve,payload:e}},Qe=function(e){return{type:we,payload:e}},Xe=function(){var e=Object(c.b)(),a=Object(c.c)((function(e){return e.auth}));return n.a.createElement(_.a,{className:"update-password-wrapper",initialValues:a,layout:"vertical",onFinish:function(a){return e(function(e){return function(a){a(Qe(!0)),G.put("/user/password",e).then((function(e){var t=e.data.error;t?s.b.error(t.code+": "+t.message):(s.b.success("Update password successfully"),setTimeout((function(){a(w())}),1e3))})).finally((function(){return a(Qe(!1))}))}}(a))}},n.a.createElement(_.a.Item,{label:"Old Password",name:"oldPass",required:!0,rules:[{required:!0}]},n.a.createElement(k.a.Password,{prefix:n.a.createElement(Ve.a,null)})),n.a.createElement(_.a.Item,{label:"New Password",name:"newPass",required:!0,rules:[{required:!0}]},n.a.createElement(k.a.Password,{prefix:n.a.createElement(Ve.a,null)})),n.a.createElement(T.a,{block:!0,type:"primary",htmlType:"submit"},"Update"))},Ze=function(){var e=Object(c.b)(),a=Object(c.c)((function(e){return e.auth}));return n.a.createElement(_.a,{className:"update-profile-wrapper",initialValues:a,layout:"vertical",onFinish:function(a){return e(function(e){return function(a){a($e(!0)),G.put("/user/",e).then((function(e){var t=e.data,r=t.data,n=t.error;n?s.b.error(n.code+": "+n.message):(r.token&&localStorage.setItem("token",r.token),a({type:je,payload:r}),s.b.success("Update profile successfully"))})).finally((function(){return a($e(!1))}))}}(a))}},n.a.createElement(_.a.Item,{label:"Username",name:"username",required:!0,rules:[{required:!0}]},n.a.createElement(k.a,{placeholder:"Username",disabled:!0,prefix:n.a.createElement(He.a,null)})),n.a.createElement(_.a.Item,{label:"Name",name:"name",required:!0,rules:[{required:!0}]},n.a.createElement(k.a,{placeholder:"Name",prefix:n.a.createElement(Je.a,null)})),n.a.createElement(T.a,{block:!0,type:"primary",htmlType:"submit"},"Update"))},ea=(t(354),function(){return Object(c.c)((function(e){return e.auth})).name?n.a.createElement("div",{className:"profile-wrapper"},n.a.createElement(Ze,null),n.a.createElement(Xe,null)):n.a.createElement(l.a,{to:"/login"})}),aa=function(){return n.a.createElement(c.a,{store:Ue},n.a.createElement(o.a,{basename:"/retro"},n.a.createElement(N,null,n.a.createElement(l.d,null,n.a.createElement(l.b,{exact:!0,path:"/",component:de}),n.a.createElement(l.b,{path:"/board/:id",component:ze}),n.a.createElement(l.b,{path:"/profile",component:ea}),n.a.createElement(l.b,{path:"/login",component:Ke}),n.a.createElement(l.b,{path:"/registry",component:Ye}),n.a.createElement(l.b,{component:be})))))},ta=t(17),ra=t.n(ta);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(355);ra.a.render(n.a.createElement(aa,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[189,1,2]]]);
//# sourceMappingURL=main.4dcc7b7f.chunk.js.map